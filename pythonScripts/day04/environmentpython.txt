
python.usyiyi.cn 中文文档


[student@room9pc01 day04]$ virsh  net-list
 名称               状态     自动开始  持久
----------------------------------------------------------
 default              活动     是           是
 private1             活动     是           是
 private2             活动     是           是
 public1              活动     是           是
 public2              活动     是           是
 rhce                 活动     是           是
 vbr                  活动     是           是

[student@room9pc01 day04]$ virsh  net-list  --all
 名称               状态     自动开始  持久
----------------------------------------------------------
 default              活动     是           是
 private1             活动     是           是
 private2             活动     是           是
 public1              活动     是           是
 public2              活动     是           是
 rhce                 活动     是           是
 vbr                  活动     是           是

[student@room9pc01 day04]$ 

[student@room9pc01 day04]$ virsh  net-dumpxml  default
<network>
  <name>default</name>
  <uuid>5bd0383d-d2db-4189-a9da-469810561abf</uuid>
  <forward mode='nat'>
    <nat>
      <port start='1024' end='65535'/>
    </nat>
  </forward>
  <bridge name='virbr0' stp='on' delay='0'/>
  <mac address='52:54:00:c8:58:d3'/>
  <ip address='192.168.122.1' netmask='255.255.255.0'>
    <dhcp>
      <range start='192.168.122.2' end='192.168.122.254'/>
    </dhcp>
  </ip>
</network>

[student@room9pc01 day04]$ 

[student@room9pc01 day04]$ clone-vm7 
Enter VM number: 1
Creating Virtual Machine disk image......	[OK]
Defining new virtual machine......		[OK]

[student@room9pc01 day04]$ clone-vm7 
Enter VM number: 1
File exists.
[student@room9pc01 day04]$ clone-vm7 
Enter VM number: 2
Creating Virtual Machine disk image......	[OK]
Defining new virtual machine......		[OK]

[student@room9pc01 day04]$ ifconfig vbr
vbr: flags=4099<UP,BROADCAST,MULTICAST>  mtu 1500
        inet 192.168.1.254  netmask 255.255.255.0  broadcast 192.168.1.255
        ether 52:54:00:35:6e:56  txqueuelen 1000  (Ethernet)
.............
[student@room9pc01 day04]$ ifconfig private2
private2: flags=4099<UP,BROADCAST,MULTICAST>  mtu 1500
        inet 192.168.2.254  netmask 255.255.255.0  broadcast 192.168.2.255
   ............

[student@room9pc01 day04]$ virsh  net-dumpxml  vbr
<network>
  <name>vbr</name>
  <uuid>bc8c51cf-34d7-4fa4-bde9-f55b7c025421</uuid>
  <forward mode='nat'>
    <nat>
      <port start='1024' end='65535'/>
    </nat>
  </forward>
  <bridge name='vbr' stp='on' delay='0'/>
  <mac address='52:54:00:35:6e:56'/>
  <domain name='localhost' localOnly='no'/>
  <ip address='192.168.1.254' netmask='255.255.255.0'>
    <dhcp>
      <range start='192.168.1.100' end='192.168.1.200'/>
    </dhcp>
  </ip>
</network>

[student@room9pc01 day04]$ virsh  net-dumpxml  private2
<network>
  <name>private2</name>
  <uuid>dca824f3-cdfc-4fcd-9b98-f8a46656c27d</uuid>
  <bridge name='private2' stp='on' delay='0'/>
  <mac address='52:54:00:f8:f9:d7'/>
  <ip address='192.168.2.254' netmask='255.255.255.0'>
  </ip>
</network>

[student@room9pc01 day04]$ 
[student@room9pc01 ~]$ systemctl is-active  vsftpd
active
[student@room9pc01 ~]$ systemctl is-enabled  vsftpd
enabled
[student@room9pc01 ~]$ cat  /etc/resolv.conf
# Generated by NetworkManager
search tedu.cn
nameserver 176.121.0.100

[student@room9pc01 ~]$ route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         176.121.206.1   0.0.0.0         UG    100    0        0 eth0
176.121.206.0   0.0.0.0         255.255.255.0   U     100    0        0 eth0
192.168.1.0     0.0.0.0         255.255.255.0   U     0      0        0 vbr
192.168.2.0     0.0.0.0         255.255.255.0   U     0      0        0 private2

[student@room9pc01 ~]$ ls  /var/ftp/
centos-1804  pub  share
[student@room9pc01 ~]$ ls  /var/ftp/centos-1804/
CentOS_BuildTag  GPL       LiveOS    RPM-GPG-KEY-CentOS-7
EFI              images    Packages  RPM-GPG-KEY-CentOS-Testing-7
EULA             isolinux  repodata  TRANS.TBL

[student@room9pc01 ~]$ tail  -1   /etc/fstab 
/var/lib/libvirt/images/iso/CentOS7-1804.iso  /var/ftp/centos-1804 iso9660 defaults 0 0

[student@room9pc01 ~]$ virsh  start  V0
域 V0 已开始

[student@room9pc01 ~]$ virsh  start  V1
域 V1 已开始

[student@room9pc01 ~]$ virsh   consle  V0
..........

[root@V1 ~]# nmcli  connection  modify  eth0  ipv4.method  manual  \
> ipv4.addresses  192.168.1.1/24  ipv4.gateway 192.168.1.254  \
> connection.autoconnect  yes
[root@V1 ~]#
[root@V1 ~]# nmcli  connection  modify  eth1  ipv4.method  manual \
> ipv4.addresses  192.168.2.1/24  ipv4.gateway  192.168.1.254  \
> connection.autoconnect  yes
[root@V1 ~]# 
[root@V1 ~]# nmcli  connection  up  eth0
Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/27)

[root@V1 ~]# nmcli  connection  up  eth1
Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/28)

[root@V1 ~]# ifconfig eth0 |head  -2
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.1.1  netmask 255.255.255.0  broadcast 192.168.1.255

[root@V1 ~]# ifconfig eth1 |head  -2
eth1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.2.1  netmask 255.255.255.0  broadcast 192.168.2.255

[root@V1 ~]# cat  /etc/resolv.conf 
; generated by /usr/sbin/dhclient-script
search vbr
nameserver 192.168.1.254
[root@V1 ~]# 
[root@V1 ~]# route  -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         192.168.1.254   0.0.0.0         UG    102    0        0 eth0
0.0.0.0         192.168.1.254   0.0.0.0         UG    103    0        0 eth1
192.168.1.0     0.0.0.0         255.255.255.0   U     102    0        0 eth0
192.168.1.254   0.0.0.0         255.255.255.255 UH    103    0        0 eth1
192.168.2.0     0.0.0.0         255.255.255.0   U     103    0        0 eth1


nmcli  connection  modify  eth0  ipv4.method  manual  \
ipv4.addresses  192.168.1.2/24  ipv4.gateway 192.168.1.254  \
connection.autoconnect  yes

nmcli  connection  modify  eth1  ipv4.method  manual \
ipv4.addresses  192.168.2.2/24  ipv4.gateway  192.168.1.254  \
connection.autoconnect  yes


[root@V1 ~]# ping  -c 2  192.168.1.254
PING 192.168.1.254 (192.168.1.254) 56(84) bytes of data.
64 bytes from 192.168.1.254: icmp_seq=1 ttl=64 time=0.245 ms
64 bytes from 192.168.1.254: icmp_seq=2 ttl=64 time=0.243 ms
....................
[root@V1 ~]# ping  -c 2  192.168.1.1
...........
[root@V1 ~]# ping  -c 2  192.168.1.2
PING 192.168.1.2 (192.168.1.2) 56(84) bytes of data.
64 bytes from 192.168.1.2: icmp_seq=1 ttl=255 time=0.395 ms
64 bytes from 192.168.1.2: icmp_seq=2 ttl=255 time=0.456 ms
.....................
[root@V1 ~]# ping  -c 2  192.168.2.2
PING 192.168.2.2 (192.168.2.2) 56(84) bytes of data.
64 bytes from 192.168.2.2: icmp_seq=1 ttl=255 time=0.590 ms
64 bytes from 192.168.2.2: icmp_seq=2 ttl=255 time=0.482 ms
................
[root@V1 ~]# ping  -c 2  192.168.2.254

[root@V1 ~]# ifconfig eth0 
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.1.1  netmask 255.255.255.0  broadcast 192.168.1.255
...............
[root@V1 ~]# ifconfig eth1
eth1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.2.1  netmask 255.255.255.0  broadcast 192.168.2.255
..............
[root@V1 ~]# echo  1 |passwd  --stdin root
更改用户 root 的密码 。
passwd：所有的身份验证令牌已经成功更新。
[root@V1 ~]# 


[student@room9pc01 ~]$ ssh  -X   root@192.168.1.2
ssh: connect to host 192.168.1.2 port 22: No route to host
[student@room9pc01 ~]$ ssh  -X   root@192.168.2.2
[root@V2 ~]# ifconfig eth0 |head  -2 ; ifconfig eth1 |head  -2
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.1.2  netmask 255.255.255.0  broadcast 192.168.1.255
eth1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.2.2  netmask 255.255.255.0  broadcast 192.168.2.255
[root@V2 ~]# echo  1 |passwd  --stdin root
更改用户 root 的密码 。
passwd：所有的身份验证令牌已经成功更新。
[root@V2 ~]# 



[root@V1 ~]# ls  /etc/yum.repos.d/
local.repo
[root@V1 ~]# vim   /etc/yum.repos.d/local.repo 
[root@V1 ~]# cat  /etc/yum.repos.d/local.repo
[local_repo]
name=CentOS-$releasever - Base
baseurl=ftp://192.168.2.254/centos-1804
enabled=1
gpgcheck=0

[root@V1 ~]# grep  -Env "^#|^$"  /etc/yum.conf
1:[main]
2:cachedir=/var/cache/yum/$basearch/$releasever
3:keepcache=0
4:debuglevel=2
5:logfile=/var/log/yum.log
6:exactarch=1
7:obsoletes=1
8:gpgcheck=0
9:plugins=1
10:installonly_limit=5
11:bugtracker_url=http://bugs.centos.org/set_project.php?project_id=23&ref=http://bugs.centos.org/bug_report_page.php?category=yum
12:distroverpkg=centos-release
[root@V1 ~]# 

[root@V1 ~]# yum clean all >/dev/null && yum repolist |tail -3
源标识                             源名称                                  状态
local_repo                         CentOS-7 - Base                         9,911
repolist: 9,911

[student@room9pc01 ~]$ du  -sh /var/lib/libvirt/images/iso/CentOS7-1804.iso
8.8G	/var/lib/libvirt/images/iso/CentOS7-1804.iso
[student@room9pc01 ~]$ 


[student@room9pc01 ~]$ scp  '/home/student/桌面/python3_pkg.zip' root@192.168.1.1:/root/
ssh: connect to host 192.168.1.1 port 22: No route to host
lost connection
[student@room9pc01 ~]$ scp  '/home/student/桌面/python3_pkg.zip' root@192.168.2.1:/root/
python3_pkg.zip                               100%   22MB  66.7MB/s   00:00    
[student@room9pc01 ~]$ scp  '/home/student/桌面/python3_pkg.zip' root@192.168.2.2:/root/
python3_pkg.zip                               100%   22MB 158.3MB/s   00:00    
[student@room9pc01 ~]$


[student@room9pc01 python1]$ unzip   python3_pkg.zip 
Archive:  python3_pkg.zip
  inflating: python3_pkg/Python-3.6.7.tgz  
  inflating: python3_pkg/README      
[student@room9pc01 python1]$ 


[root@V1 ~]# type zip
-bash: type: zip: 未找到
[root@V1 ~]# type unzip
-bash: type: unzip: 未找到
[root@V1 ~]# yum  -y install  zip  unzip


[root@V1 ~]# ls  /
bin   dev  home  lib64  mnt  proc  run   srv  tmp  var
boot  etc  lib   media  opt  root  sbin  sys  usr
[root@V1 ~]# ls
Desktop  python3_pkg.zip
[root@V1 ~]# yum  -y  install  sqlite-devel tk-devel tcl-devel  readline-devel  zlib-devel  gcc  gcc-c++  openssl-devel  libffi-devel

  tcl.x86_64 1:8.5.13-8.el7                                                     
  tk.x86_64 1:8.5.13-6.el7                                                      
  xorg-x11-proto-devel.noarch 0:7.7-20.el7                                      

完毕！
[root@V1 ~]# rpm  -q  sqlite-devel tk-devel tcl-devel  readline-devel  zlib-devel  gcc  gcc-c++  openssl-devel  libffi-devel
sqlite-devel-3.7.17-8.el7.x86_64
tk-devel-8.5.13-6.el7.x86_64
tcl-devel-8.5.13-8.el7.x86_64
readline-devel-6.2-10.el7.x86_64
zlib-devel-1.2.7-17.el7.x86_64
gcc-4.8.5-28.el7.x86_64
gcc-c++-4.8.5-28.el7.x86_64
openssl-devel-1.0.2k-12.el7.x86_64
libffi-devel-3.0.13-18.el7.x86_64
[root@V1 ~]# 
[root@V2 ~]# free  -m
              total        used        free      shared  buff/cache   available
Mem:           1935          78        1467           8         389        1669
Swap:             0           0           0
[root@V2 ~]# 

已安装:
  unzip.x86_64 0:6.0-19.el7                                                     

完毕！
[root@V1 ~]# unzip   python3_pkg.zip 
Archive:  python3_pkg.zip
  inflating: python3_pkg/Python-3.6.7.tgz  
  inflating: python3_pkg/README      
[root@V1 ~]#  mv  python3_pkg/Python-3.6.7.tgz   .
[root@V1 ~]# ls
Desktop  Python-3.6.7.tgz  python3_pkg  python3_pkg.zip
[root@V1 ~]# tar  -zxf  Python-3.6.7.tgz 

[root@V1 ~]# ls
Desktop  Python-3.6.7  Python-3.6.7.tgz  python3_pkg  python3_pkg.zip
[root@V1 ~]# cd  Python-3.6.7/
[root@V1 Python-3.6.7]# ls
aclocal.m4    Doc         LICENSE          Objects   pyconfig.h.in
config.guess  Grammar     Mac              Parser    Python
config.sub    Include     Makefile.pre.in  PC        README.rst
configure     install-sh  Misc             PCbuild   setup.py
configure.ac  Lib         Modules          Programs  Tools

[root@V1 Python-3.6.7]# ./configure   --prefix=/usr/local/

..............
config.status: creating Makefile.pre
config.status: creating Modules/Setup.config
config.status: creating Misc/python.pc
config.status: creating Misc/python-config.sh
config.status: creating Modules/ld_so_aix
config.status: creating pyconfig.h
creating Modules/Setup
creating Modules/Setup.local
creating Makefile


If you want a release build with all stable optimizations active (PGO, etc),
please run ./configure --enable-optimizations


[root@V2 Python-3.6.7]# make && make install
................
[root@V2 Python-3.6.7]# python  --version
Python 2.7.5
[root@V2 Python-3.6.7]# python3  --version
Python 3.6.7
[root@V2 Python-3.6.7]# 

[root@V1 day04]# scp  subpass.py  student@192.168.2.254:/home/student/桌面/python1_2/
student@192.168.2.254's password: tedu
subpass.py                         100%  957     2.0MB/s   00:00    
[root@V1 day04]# 






 yum install -y  sqlite-devel  tk-devel   tcl-devel   readline-devel    zlib-devel    gcc       gcc-c++     openssl-devel     libffi-devel
 tar xzf Python-3.6.7.tgz
 cd Python-3.6.7
 ./configure --prefix=/usr/local/
make && make install



-----------------------------
202.96.128.86
[student@room9pc01 ~]$ pwd
/home/student
[student@room9pc01 ~]$ cat  /etc/resolv.conf
# Generated by NetworkManager
search tedu.cn
nameserver 176.121.0.100



